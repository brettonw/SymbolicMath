<!doctype html> 
<html>
    <head>
        <title>Symbolic Math - Gravity</title>
        <link rel="stylesheet" href="style.css" />
        <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML"></script>
        <script type="text/javascript" src="https://raw.githubusercontent.com/brettonw/graph-svg.js/master/graph-svg.js"></script>
        <script src="SymbolicMath.js"></script>
        <script type="text/javascript">
        function initPage() {
            var display = new String();
            display = "<table cellspacing='5'>";
            display += "<tr><th>Equation</th></tr>\n";

            // create the sampler I'll use to build graphs
            var sampler = new Sampler();

            // want to know time and velocity at distance travelled - note this is
            // entirely independent of mass
            // D = 1/2 A t^2
            // V = A t
            // given D -> t = Sqrt (2 D / A), V = A (2 D / A) ^ 0.5
            var t_at_d = SM.Sqrt(SM.Divide(SM.Multiply("d", 2.0), "a"));
            var v_at_d = SM.Multiply("a", t_at_d);

            // compute parameters for the following graphs
            var values = { d: 1.0, a: SM.namedConstants.g };
            var t = t_at_d.N(values);
            var v = v_at_d.N(values);
            console.log("time at arrest: " + t);
            console.log("velocity at arrest: " + v);
            {
                // now evaluate the function
                var graphData = sampler.Evaluate(v_at_d, { x: "d", from: 0.0, to: 1.5 }, { a: SM.namedConstants.g });

                var plot = new Plot();
                plot.title = "Velocity vs Distance fallen";
                plot.xAxisTitle = "Distance (m)";
                plot.yAxisTitle = "Velocity (m s^-1)";
                plot.fromGraphData(graphData);
            }

            // the amount of force required to stop this object is dependent on mass
            // f in Newtons, 1 N = (1 Kg m)/s^2
            // a = -v/t

            // the amount of force required to stop a 1kg weight after falling 1m is
            // f = m a where a is applied over some time

            //if it's
            // applied over a period of time (assuming uniform application)
            // A = F / m
            // V = A t -> V = F t / m
            // F = m V / t
            {
                var F_at_t = SM.Multiply("m", "v").Divide("t");

                // now evaluate the function
                var graphData = sampler.Evaluate(F_at_t, { x: "t", from: 1.0e-2, to: 0.25 }, { m: 1.0, v: v } );

                var plot = new Plot();
                plot.title = "Force at stop (fall 1m)";
                plot.xAxisTitle = "Time (s)";
                plot.yAxisTitle = "Force (N)";
                plot.fromGraphData(graphData);
            }

            // now change it around so that we say that 1m of rope is allowed to stretch
            // by 5%, so the stop distance must be no more than 0.05m
            // velocity change must be -v, over a time t, such that the distance travelled
            // is some amount d
            // d = v t + -1/2 f t^2 / m
            {
                var d_at_t = SM.Multiply(2, "m", SM.Subtract(SM.Multiply("v", "t"), "d")).Divide(SM.Power("t", 2));
                var F_at_t_B = SM.Multiply(2, "m", SM.Subtract(SM.Multiply("v", "t"), "d")).Divide(SM.Power("t", 2));

                // now evaluate the function
                var graphData = sampler.Evaluate(F_at_t_B, { x: "t", from: 1.0e-2, to: 1.0 }, { m: 1.0, v: v, d: 0.05 });

                var plot = new Plot();
                plot.title = "Force at stop time (fall 1m, stretch 5%)";
                plot.xAxisTitle = "Time (s)";
                plot.yAxisTitle = "Force (N)";
                plot.fromGraphData(graphData);
            }
        }

        </script> 
    </head>
    <body onload="initPage();">
        <div id="display"></div>
    </body>
</html>
